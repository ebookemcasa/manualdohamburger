<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sobremesas Fitness - Mestre Culin√°rio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap');
        body { font-family: 'Lato', sans-serif; background-color: #f8f7f4; color: #3d3d3d; }
        h1, h2, h3, h4, .nav-link { font-family: 'Playfair Display', serif; }
        
        /* Estilos para interatividade */
        .aula-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .aula-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
        }
        
        /* Checklist de Ingredientes */
        .ingredient-item input[type="checkbox"] {
            display: none;
        }
        .ingredient-item span {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .ingredient-item input[type="checkbox"]:checked + span {
            text-decoration: line-through;
            opacity: 0.6;
        }

        /* Acordion/Sanfona para os Passos */
        details > summary {
            cursor: pointer;
            list-style: none;
            display: inline-flex;
            align-items: center;
            transition: color 0.2s ease;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details > summary::before {
            content: '‚ñ∂';
            margin-right: 8px;
            font-size: 0.7em;
            transition: transform 0.2s ease-in-out;
        }
        details[open] > summary::before {
            transform: rotate(90deg);
        }

        /* Tooltips para termos t√©cnicos */
        .tooltip {
            position: relative;
            cursor: help;
            border-bottom: 2px dotted #ca8a04;
            font-weight: bold;
        }
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #3d3d3d;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-family: 'Lato', sans-serif;
            font-weight: normal;
        }
        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #3d3d3d transparent transparent transparent;
        }
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 shadow-md">
        <nav class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="text-3xl font-bold text-stone-800">Mestre<span class="text-amber-600">Culin√°rio</span></a>
                <a href="index.html" class="nav-link text-stone-600 hover:text-amber-600 transition-colors">Voltar √† P√°gina Principal</a>
            </div>
        </nav>
    </header>
    <main class="container mx-auto px-6 py-8 md:py-12">
        <section id="page-title" class="text-center mb-16">
            <h1 class="text-4xl md:text-6xl font-bold text-stone-800">Sobremesas <span class="text-amber-600">Fitness</span></h1>
            <p class="mt-4 max-w-2xl mx-auto text-stone-600">Descubra o prazer de um doce que nutre. Aulas para criar sobremesas deliciosas, inteligentes e sem culpa.</p>
        </section>

        <div id="aulas-list" class="space-y-8 max-w-5xl mx-auto">
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-nice-cream"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 01: Sorvete de Banana ("Nice Cream")</h2><p class="text-stone-600 mt-2">O sorvete de 1 ingrediente que √© pura fruta, cremoso e sem a√ß√∫car.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-maca-assada"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 02: Ma√ß√£ Assada com Canela</h2><p class="text-stone-600 mt-2">Uma sobremesa quente, reconfortante e que real√ßa a do√ßura natural da fruta.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-pudim-chia"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 03: Pudim de Chia com Frutas</h2><p class="text-stone-600 mt-2">Aprenda a usar a chia para criar um pudim rico em fibras e √≥mega 3.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-mousse-abacate"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 04: Mousse de Abacate e Cacau</h2><p class="text-stone-600 mt-2">A sobremesa 'm√°gica' que usa gorduras boas para uma cremosidade incr√≠vel.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-cookies-aveia"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 05: Cookies de Aveia e Banana</h2><p class="text-stone-600 mt-2">Cookies macios e saborosos com apenas 3 ingredientes base.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-energy-balls"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 06: Bolinhas Energ√©ticas de T√¢mara</h2><p class="text-stone-600 mt-2">O snack perfeito para antes do treino, sem cozimento e cheio de energia.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-muffins-fit"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 07: Muffins de Ma√ß√£ e Aveia</h2><p class="text-stone-600 mt-2">Aprenda a fazer bolinhos fofos e h√∫midos usando farinha de aveia.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-iogurte-grelhado"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 08: Iogurte Grego com P√™ssegos Grelhados</h2><p class="text-stone-600 mt-2">Uma sobremesa elegante que carameliza o a√ß√∫car natural das frutas.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-brownie-feijao"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 09: Brownie de Feij√£o Preto</h2><p class="text-stone-600 mt-2">Sim, √© poss√≠vel! Um brownie denso e rico, sem farinha e com prote√≠na extra.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-torta-limao-fit"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 10: Torta de Lim√£o Fit</h2><p class="text-stone-600 mt-2">Uma vers√£o leve e proteica, com base de am√™ndoas e recheio de iogurte.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-bolo-laranja-fit"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 11: Bolo de Laranja com Farinha de Am√™ndoa</h2><p class="text-stone-600 mt-2">Um bolo sem gl√∫ten, fofinho e cheio do sabor c√≠trico da laranja.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-danoninho-inhame"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 12: 'Danoninho' Caseiro de Morango e Inhame</h2><p class="text-stone-600 mt-2">O segredo do inhame para um creme delicioso e sem lactose.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-cheesecake-copo"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 13: Cheesecake Fit no Copo</h2><p class="text-stone-600 mt-2">Uma vers√£o descomplicada, em por√ß√µes individuais e muito mais leve.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-barra-proteina"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 14: Barra de Prote√≠na Caseira</h2><p class="text-stone-600 mt-2">Controle os ingredientes e o sabor das suas pr√≥prias barras de prote√≠na.</p></div>
            <div class="aula-card bg-white p-6 rounded-lg shadow-lg" data-target="receita-trufas-fit"><h2 class="text-2xl md:text-3xl font-bold text-amber-700">Aula 15: Trufas de Batata Doce e Cacau</h2><p class="text-stone-600 mt-2">Um docinho para matar a vontade, com a do√ßura natural da batata doce.</p></div>
        </div>

        <div id="receitas-container" class="hidden">
            <button id="back-to-list-btn" class="mb-8 inline-flex items-center text-amber-700 hover:text-amber-800 font-bold"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>Voltar ao √çndice de Aulas</button>
            <div id="receita-nice-cream" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-maca-assada" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-pudim-chia" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-mousse-abacate" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-cookies-aveia" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-energy-balls" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-muffins-fit" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-iogurte-grelhado" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-brownie-feijao" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-torta-limao-fit" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-bolo-laranja-fit" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-danoninho-inhame" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-cheesecake-copo" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-barra-proteina" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
            <div id="receita-trufas-fit" class="receita-content bg-white p-8 rounded-lg shadow-xl max-w-7xl mx-auto hidden"></div>
        </div>
    </main>
    <footer class="bg-white border-t mt-16"><div class="container mx-auto px-6 py-8 text-center text-stone-600"><p>&copy; 2024 Mestre Culin√°rio. Todos os direitos reservados.</p></div></footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const aulas = {
            'nice-cream': {
                title: "Aula 01: Sorvete de Banana ('Nice Cream')",
                description: "A sobremesa fitness mais f√°cil, surpreendente e vers√°til. Aprenda a transformar bananas congeladas num sorvete cremoso, sem a√ß√∫car, sem lactose e com apenas um ingrediente.",
                calculator: { label: "N√∫mero de Bananas:", unit: "nice-cream-input", base_value: 2, default_value: 2 },
                details: { tempoPreparo: "5 min", tempoCozimento: "N/A", tempoDescanso: "2 horas (congela√ß√£o)", rendimento: "1 por√ß√£o por 2 bananas", dificuldade: "F√°cil", utensilios: ["Processador de alimentos ou liquidificador potente", "Faca"] },
                dicaDeMestre: "O segredo para um 'nice cream' perfeito √© a banana. Use bananas bem maduras (com pintinhas pretas), pois s√£o mais doces e cremosas. Congele-as j√° fatiadas para facilitar o trabalho do seu processador.",
                ingredients: [
                    { name: 'Banana madura, fatiada e congelada', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: '√Ågua ou Leite (se necess√°rio)', base_qty: 1, unit: 'c. de sopa', scalable: false }
                ],
                steps: [
                    { title: "Congelar as Bananas", description: "Descasque bananas bem maduras e corte-as em rodelas de cerca de 1cm de espessura. Disponha as rodelas numa √∫nica camada sobre um prato ou tabuleiro forrado com papel vegetal e leve ao congelador por pelo menos 2 horas.", porque: "Congelar as bananas em fatias separadas impede que elas formem um bloco de gelo s√≥lido, o que danificaria o seu liquidificador. A banana congelada √© a base estrutural e de cremosidade do 'sorvete'.", pontoCritico: "N√£o congele as bananas inteiras ou com casca. O processo de as preparar depois de congeladas seria muito dif√≠cil." },
                    { title: "Processar at√© Ficar Cremoso", description: "Coloque as rodelas de banana congeladas no copo de um processador de alimentos ou liquidificador potente. Comece a pulsar para quebrar os peda√ßos. Depois, processe continuamente. A mistura ir√° passar por v√°rias fases: esfarelada, pastosa e, de repente, m√°gica e cremosa.", porque: "A alta velocidade e a fric√ß√£o quebram as c√©lulas da banana congelada, libertando a sua pectina e criando uma emuls√£o cremosa, muito semelhante a um sorvete tradicional.", pontoCritico: "Tenha paci√™ncia. Pode demorar 2 a 4 minutos. Pare para raspar as laterais do copo algumas vezes. Se o seu liquidificador estiver com dificuldades, adicione uma colher de sopa de √°gua ou leite para o ajudar a girar." },
                    { title: "Servir Imediatamente", description: "Assim que a mistura atingir uma consist√™ncia de 'soft serve' (gelado de m√°quina), est√° pronta. Sirva imediatamente para uma textura cremosa. Se preferir uma consist√™ncia mais firme, pode transferir para um recipiente e levar ao congelador por mais 30 minutos.", porque: "A textura ideal √© obtida logo ap√≥s o processamento. Congelar por muito tempo pode torn√°-lo demasiado duro.", pontoCritico: "Trabalhe r√°pido, pois o 'nice cream' derrete mais depressa que um sorvete tradicional." }
                ],
                variacoes: [
                    "<strong>Chocolate:</strong> Adicione 1 colher de sopa de cacau em p√≥.",
                    "<strong>Frutos Vermelhos:</strong> Junte 1/2 ch√°vena de morangos ou framboesas congeladas.",
                    "<strong>Manteiga de Amendoim:</strong> Adicione 1 colher de sopa de manteiga de amendoim para um boost de prote√≠na e sabor."
                ]
            },
            'maca-assada': {
                title: "Aula 02: Ma√ß√£ Assada com Canela",
                description: "Uma sobremesa cl√°ssica, quente e reconfortante que perfuma a casa inteira. Assar a ma√ß√£ concentra a sua do√ßura natural, tornando-a uma op√ß√£o leve e saud√°vel para satisfazer a vontade de um doce.",
                calculator: { label: "N√∫mero de Ma√ß√£s:", unit: "maca-assada-input", base_value: 2, default_value: 2 },
                details: { tempoPreparo: "10 min", tempoCozimento: "30-40 min", tempoDescanso: "N/A", rendimento: "1 por√ß√£o por ma√ß√£", dificuldade: "F√°cil", utensilios: ["Travessa de ir ao forno", "Faca pequena", "Descaro√ßador de ma√ß√£ (opcional)"] },
                dicaDeMestre: "N√£o descasque a ma√ß√£ completamente. A casca ajuda a manter a estrutura da ma√ß√£ enquanto assa, evitando que ela se desfa√ßa e se transforme em pur√©. Fa√ßa alguns furos na casca com um garfo para permitir que o vapor saia.",
                ingredients: [
                    { name: 'Ma√ß√£s (tipo Reineta ou Granny Smith)', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: 'Canela em p√≥', base_qty: 1, unit: 'c. de ch√°', scalable: true },
                    { name: 'Mel ou Xarope de √Åcer', base_qty: 2, unit: 'c. de ch√°', scalable: true },
                    { name: 'Nozes ou pec√£s picadas', base_qty: 2, unit: 'c. de sopa', scalable: true },
                    { name: '√Ågua', base_qty: 2, unit: 'c. de sopa', scalable: true }
                ],
                steps: [
                    { title: "Preparar as Ma√ß√£s", description: "Pr√©-aque√ßa o forno a 190¬∞C. Lave bem as ma√ß√£s. Com uma faca pequena ou um descaro√ßador, remova o caro√ßo central da ma√ß√£ pelo topo, criando uma cavidade mas sem atravessar a base.", porque: "Criar esta cavidade permite-nos rechear a ma√ß√£ com sabores que ir√£o penetrar na polpa durante o cozimento, al√©m de remover a parte n√£o comest√≠vel.", pontoCritico: "Tenha cuidado para n√£o furar a base da ma√ß√£, para que o recheio e os sucos n√£o vazem por baixo." },
                    { title: "Rechear e Preparar para Assar", description: "Numa tigela pequena, misture a canela, o mel (ou xarope) e as nozes picadas. Recheie a cavidade de cada ma√ß√£ com esta mistura. Coloque as ma√ß√£s numa pequena travessa de forno e adicione a √°gua no fundo da travessa.", porque: "O recheio transforma uma simples ma√ß√£ assada numa sobremesa mais complexa em sabor e textura. A √°gua no fundo da travessa cria um ambiente h√∫mido no forno, ajudando a ma√ß√£ a cozinhar no vapor e a n√£o secar.", pontoCritico: "N√£o encha demasiado a travessa, deixe algum espa√ßo entre as ma√ß√£s." },
                    { title: "Assar at√© Ficar Macia", description: "Leve ao forno e asse por 30 a 40 minutos. A ma√ß√£ est√° pronta quando a polpa estiver muito macia (um garfo deve entrar facilmente) e a pele enrugada. A meio do tempo, pode regar as ma√ß√£s com o l√≠quido que se forma na travessa.", porque: "O calor do forno quebra as fibras da ma√ß√£, amaciando-a, e carameliza os a√ß√∫cares naturais e do recheio, intensificando o sabor.", pontoCritico: "O tempo pode variar muito dependendo do tamanho e da variedade da ma√ß√£. Comece a verificar a partir dos 25 minutos.", timer: 1800 }
                ],
                variacoes: [
                    "<strong>Com Passas:</strong> Adicione passas ou arandos secos ao recheio.",
                    "<strong>Servir com:</strong> Uma colher de iogurte grego natural ou uma pequena bola de 'nice cream' de baunilha.",
                    "<strong>No Micro-ondas:</strong> Para uma vers√£o ultra-r√°pida, prepare a ma√ß√£ da mesma forma e cozinhe no micro-ondas em alta pot√™ncia por 4-6 minutos."
                ]
            },
            'pudim-chia': {
                title: "Aula 03: Pudim de Chia com Frutas",
                description: "Descubra o poder das sementes de chia para criar um pudim cremoso, sem cozimento e carregado de fibras, prote√≠nas e √≥mega 3. √â um pequeno-almo√ßo, lanche ou sobremesa incrivelmente vers√°til e saciante.",
                calculator: { label: "Por√ß√µes:", unit: "pudim-chia-input", base_value: 2, default_value: 2 },
                details: { tempoPreparo: "5 min", tempoCozimento: "N/A", tempoDescanso: "2 horas (m√≠nimo)", rendimento: "Serve 2 pessoas", dificuldade: "F√°cil", utensilios: ["Frasco ou tigela com tampa", "Batedor de arame pequeno ou garfo"] },
                dicaDeMestre: "O segredo para um pudim de chia sem grumos √© mistur√°-lo duas vezes. Mexa bem quando combinar os ingredientes pela primeira vez, e depois, passados 10-15 minutos, mexa vigorosamente uma segunda vez antes de o levar √† geleira. Isto quebra quaisquer aglomerados de chia que se tenham formado.",
                ingredients: [
                    { name: 'Sementes de Chia', base_qty: 4, unit: 'c. de sopa', scalable: true },
                    { name: 'Leite ou bebida vegetal (am√™ndoa, coco)', base_qty: 1, unit: 'ch√°vena (240ml)', scalable: true },
                    { name: 'Extrato de Baunilha', base_qty: 0.5, unit: 'c. de ch√°', scalable: true },
                    { name: 'Ado√ßante (mel, xarope de √°cer)', base_qty: 1, unit: 'c. de sopa', scalable: true },
                    { name: 'Frutas frescas para servir (manga, frutos vermelhos)', base_qty: 0, unit: 'A gosto', scalable: false }
                ],
                steps: [
                    { title: "A Mistura Inicial", description: "Num frasco ou tigela, junte as sementes de chia, o leite, a baunilha e o ado√ßante. Com um batedor de arame pequeno ou um garfo, mexa muito bem por cerca de 1 minuto para garantir que todas as sementes est√£o em contacto com o l√≠quido.", porque: "As sementes de chia t√™m uma camada exterior hidrof√≠lica, o que significa que absorvem muitas vezes o seu peso em l√≠quido. Esta mistura inicial √© o que ativa essa propriedade.", pontoCritico: "Se n√£o misturar bem, as sementes podem aglomerar-se no fundo e n√£o formar o gel de forma uniforme." },
                    { title: "O Segundo 'Round' e o Descanso", description: "Deixe a mistura descansar na bancada por 10 a 15 minutos. As sementes come√ßar√£o a inchar. Mexa vigorosamente uma segunda vez. Tape e leve √† geleira por pelo menos 2 horas, ou durante a noite.", porque: "A segunda mistura quebra os primeiros aglomerados que se formam, garantindo uma textura final perfeitamente lisa e homog√©nea. O tempo na geleira √© quando o gel se forma completamente, criando a consist√™ncia de pudim.", pontoCritico: "O tempo m√≠nimo de descanso √© de 2 horas, mas o ideal √© deixar de um dia para o outro para uma textura perfeita.", timer: 7200 }
                ],
                variacoes: [
                    "<strong>Pudim de Chocolate:</strong> Misture 1-2 colheres de sopa de cacau em p√≥ na mistura inicial.",
                    "<strong>Pudim de Matcha:</strong> Adicione 1 colher de ch√° de ch√° matcha em p√≥.",
                    "<strong>Em Camadas:</strong> Crie um 'parfait' alternando camadas de pudim de chia com camadas de pur√© de fruta e granola."
                ]
            },
            'mousse-abacate': {
                title: "Aula 04: Mousse de Abacate e Cacau",
                description: "Uma sobremesa 'secreta' que vai enganar qualquer um. A cremosidade do abacate substitui as natas e os ovos para criar uma mousse de chocolate densa, rica e cheia de gorduras saud√°veis.",
                calculator: { label: "Por√ß√µes:", unit: "mousse-abacate-input", base_value: 2, default_value: 2 },
                details: { tempoPreparo: "10 min", tempoCozimento: "N/A", tempoDescanso: "1 hora", rendimento: "Serve 2-3 pessoas", dificuldade: "F√°cil", utensilios: ["Processador de alimentos ou liquidificador"] },
                dicaDeMestre: "Use um abacate que esteja perfeitamente maduro, mas n√£o passado (sem manchas pretas na polpa). A matura√ß√£o correta √© a chave para uma textura ultra-cremosa e um sabor neutro que n√£o interfere com o chocolate.",
                ingredients: [
                    { name: 'Abacate maduro', base_qty: 1, unit: 'unid. grande', scalable: true },
                    { name: 'Cacau em P√≥ (sem a√ß√∫car)', base_qty: 4, unit: 'c. de sopa', scalable: true },
                    { name: 'Mel ou Xarope de √Åcer', base_qty: 4, unit: 'c. de sopa', scalable: true },
                    { name: 'Leite ou bebida vegetal', base_qty: 4, unit: 'c. de sopa', scalable: true },
                    { name: 'Extrato de Baunilha', base_qty: 1, unit: 'c. de ch√°', scalable: true }
                ],
                steps: [
                    { title: "Processar os Ingredientes", description: "Num processador de alimentos ou liquidificador, junte a polpa do abacate, o cacau em p√≥, o ado√ßante escolhido, o leite e a baunilha. Processe em alta velocidade.", porque: "O processamento em alta velocidade quebra as fibras do abacate e emulsiona a sua gordura com os outros ingredientes, criando a textura rica e aveludada de uma mousse tradicional.", pontoCritico: "Pode ser necess√°rio parar e raspar as laterais do copo algumas vezes para garantir que todos os ingredientes s√£o incorporados e que a mistura fica perfeitamente lisa." },
                    { title: "Ajustar e Refrigerar", description: "Continue a processar at√© obter um creme completamente liso e sem grumos. Prove e ajuste a do√ßura se necess√°rio. Divida a mousse por ta√ßas e leve √† geleira por pelo menos 1 hora para firmar e para que os sabores se fundam.", porque: "O tempo de refrigera√ß√£o ajuda a mousse a firmar ligeiramente e, mais importante, permite que o sabor do cacau se desenvolva e se sobreponha a qualquer resqu√≠cio de sabor do abacate.", pontoCritico: "Sirva frio. A temperatura baixa real√ßa a textura e o sabor a chocolate." }
                ],
                variacoes: [
                    "<strong>Com Caf√©:</strong> Adicione uma colher de ch√° de caf√© sol√∫vel para intensificar o sabor do chocolate.",
                    "<strong>Com Hortel√£:</strong> Junte algumas folhas de hortel√£ fresca para uma vers√£o 'after eight'.",
                    "<strong>Com Laranja:</strong> Adicione raspas de laranja para um toque c√≠trico."
                ]
            },
            'cookies-aveia': {
                title: "Aula 05: Cookies de Aveia e Banana",
                description: "Aprenda a fazer os cookies mais f√°ceis e saud√°veis do mundo. Com apenas 3 ingredientes base, voc√™ cria um snack macio, saboroso e perfeito para quando apetece um doce sem culpa.",
                calculator: { label: "Por√ß√µes (aprox. 12 cookies):", unit: "cookies-aveia-input", base_value: 1, default_value: 1 },
                details: { tempoPreparo: "10 min", tempoCozimento: "15-20 min", tempoDescanso: "N/A", rendimento: "Cerca de 12 cookies", dificuldade: "F√°cil", utensilios: ["Tigela", "Garfo", "Tabuleiro de forno"] },
                dicaDeMestre: "Estes cookies n√£o se espalham no forno como os tradicionais. O formato que voc√™ lhes der antes de assar ser√° o formato final. Use as costas de uma colher para os achatar ligeiramente e dar-lhes uma forma redonda.",
                ingredients: [
                    { name: 'Bananas bem maduras', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: 'Aveia em Flocos', base_qty: 1, unit: 'ch√°vena (90g)', scalable: true },
                    { name: 'Pepitas de Chocolate Amargo (opcional)', base_qty: 0.25, unit: 'ch√°vena', scalable: true }
                ],
                steps: [
                    { title: "Preparar a Massa", description: "Pr√©-aque√ßa o forno a 180¬∞C e forre um tabuleiro com papel vegetal. Numa tigela, esmague as bananas com um garfo at√© formar um pur√©. Junte a aveia e as pepitas de chocolate (se usar) e misture bem.", porque: "A banana atua como o ado√ßante e o agente ligante desta receita, eliminando a necessidade de a√ß√∫car refinado, ovos ou gordura. A aveia d√° estrutura e fibras.", pontoCritico: "Use bananas com muitas pintas pretas. Elas s√£o muito mais doces e f√°ceis de esmagar, o que √© essencial para esta receita." },
                    { title: "Moldar e Assar", description: "Com uma colher, coloque pequenas por√ß√µes da massa no tabuleiro preparado, formando pequenos montes. Achate-os ligeiramente. Leve ao forno por 15 a 20 minutos, ou at√© as bordas estarem douradas e o centro firme.", porque: "Como n√£o t√™m fermento ou gordura em grande quantidade, estes cookies n√£o mudam muito de forma, por isso a moldagem inicial √© importante para o aspeto final.", pontoCritico: "Deixe espa√ßo entre os cookies no tabuleiro, embora eles n√£o se espalhem muito.", timer: 900 }
                ],
                variacoes: [
                    "<strong>Com Frutos Secos:</strong> Substitua as pepitas de chocolate por passas, arandos ou nozes picadas.",
                    "<strong>Com Especiarias:</strong> Adicione 1/2 colher de ch√° de canela ou noz-moscada √† massa.",
                    "<strong>Com Manteiga de Amendoim:</strong> Misture uma colher de sopa de manteiga de amendoim na massa para mais sabor e prote√≠na."
                ]
            },
            'energy-balls': {
                title: "Aula 06: Bolinhas Energ√©ticas de T√¢mara",
                description: "O snack perfeito para levar para qualquer lado, para antes do treino ou para matar a vontade de um doce. Estas bolinhas n√£o precisam de cozimento e s√£o ado√ßadas naturalmente com t√¢maras.",
                calculator: { label: "Por√ß√µes (aprox. 12 bolinhas):", unit: "energy-balls-input", base_value: 1, default_value: 1 },
                details: { tempoPreparo: "15 min", tempoCozimento: "N/A", tempoDescanso: "30 min (geleira)", rendimento: "Cerca de 12-15 bolinhas", dificuldade: "F√°cil", utensilios: ["Processador de alimentos"] },
                dicaDeMestre: "Se as suas t√¢maras estiverem um pouco secas, demolhe-as em √°gua quente por 10 minutos antes de as usar. Isso ir√° reidrat√°-las e torn√°-las muito mais f√°ceis de processar, resultando numa 'massa' mais coesa.",
                ingredients: [
                    { name: 'T√¢maras Medjool, sem caro√ßo', base_qty: 1, unit: 'ch√°vena (aprox. 12)', scalable: true },
                    { name: 'Frutos secos (nozes, am√™ndoas, cajus)', base_qty: 1, unit: 'ch√°vena', scalable: true },
                    { name: 'Aveia em flocos', base_qty: 0.5, unit: 'ch√°vena', scalable: true },
                    { name: 'Manteiga de amendoim ou am√™ndoa', base_qty: 2, unit: 'c. de sopa', scalable: true },
                    { name: 'Sementes de Chia ou Linha√ßa (opcional)', base_qty: 1, unit: 'c. de sopa', scalable: true },
                    { name: 'Coco ralado ou cacau em p√≥ (para enrolar)', base_qty: 0, unit: 'A gosto', scalable: false }
                ],
                steps: [
                    { title: "Processar os Ingredientes", description: "Num processador de alimentos, junte as t√¢maras, os frutos secos, a aveia, a manteiga de amendoim e as sementes (se usar). Processe at√© a mistura se come√ßar a agregar e formar uma bola.", porque: "As t√¢maras s√£o pegajosas e atuam como o 'cimento' que une todos os ingredientes. Os frutos secos e a aveia d√£o a estrutura e a textura.", pontoCritico: "N√£o processe em demasia ao ponto de virar uma manteiga. Queremos sentir os pequenos peda√ßos dos frutos secos." },
                    { title: "Moldar e Refrigerar", description: "Com as m√£os, retire pequenas por√ß√µes da massa e enrole-as para formar bolinhas do tamanho de uma noz. Passe as bolinhas por coco ralado, cacau em p√≥ ou mais sementes de chia para as cobrir. Leve √† geleira por pelo menos 30 minutos para firmarem.", porque: "Refrigerar ajuda as bolinhas a ficarem mais firmes e menos pegajosas, al√©m de permitir que os sabores se fundam.", pontoCritico: "Se a mistura estiver demasiado pegajosa para enrolar, molhe ligeiramente as m√£os." }
                ],
                variacoes: [
                    "<strong>Sabor a Brownie:</strong> Adicione 2 colheres de sopa de cacau em p√≥ √† mistura.",
                    "<strong>Sabor a Tarte de Cenoura:</strong> Adicione cenoura ralada, noz-moscada e canela.",
                    "<strong>Com Prote√≠na:</strong> Junte uma colher de prote√≠na em p√≥ para um snack p√≥s-treino."
                ]
            },
            'muffins-fit': {
                title: "Aula 07: Muffins de Ma√ß√£ e Aveia",
                description: "Aprenda a fazer muffins fofos, h√∫midos e saborosos, usando a do√ßura natural da ma√ß√£ e a fibra da aveia. S√£o perfeitos para um lanche ou pequeno-almo√ßo saud√°vel para levar.",
                calculator: { label: "N√∫mero de Muffins:", unit: "muffins-fit-input", base_value: 12, default_value: 12 },
                details: { tempoPreparo: "15 min", tempoCozimento: "20-25 min", tempoDescanso: "10 min", rendimento: "12 muffins", dificuldade: "F√°cil", utensilios: ["Forma de muffins", "Tigela", "Batedor de arame"] },
                dicaDeMestre: "N√£o misture a massa em excesso depois de adicionar a farinha. Misture apenas at√© os ingredientes secos e h√∫midos se combinarem. Isto evita o desenvolvimento do gl√∫ten e garante muffins mais fofos e leves.",
                ingredients: [
                    { name: 'Farinha de Aveia (ou flocos triturados)', base_qty: 1.5, unit: 'ch√°venas', scalable: true },
                    { name: 'Ma√ß√£, descascada e ralada', base_qty: 1, unit: 'unid. grande', scalable: true },
                    { name: 'Ovos', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: 'Mel ou Xarope de √Åcer', base_qty: 0.25, unit: 'ch√°vena', scalable: true },
                    { name: 'Iogurte Grego Natural', base_qty: 0.25, unit: 'ch√°vena', scalable: true },
                    { name: '√ìleo de Coco, derretido', base_qty: 2, unit: 'c. de sopa', scalable: true },
                    { name: 'Fermento em P√≥', base_qty: 1.5, unit: 'c. de ch√°', scalable: true },
                    { name: 'Canela em P√≥', base_qty: 1, unit: 'c. de ch√°', scalable: true }
                ],
                steps: [
                    { title: "Preparar a Massa", description: "Pr√©-aque√ßa o forno a 180¬∞C e prepare uma forma de 12 muffins. Numa tigela grande, misture os ingredientes h√∫midos: a ma√ß√£ ralada, os ovos, o mel, o iogurte e o √≥leo de coco.", porque: "A ma√ß√£ ralada e o iogurte fornecem a maior parte da humidade, mantendo os muffins macios sem necessidade de muita gordura.", pontoCritico: "Esprema ligeiramente a ma√ß√£ ralada para remover o excesso de √°gua antes de a adicionar √† mistura." },
                    { title: "Combinar Secos e H√∫midos", description: "Numa outra tigela, misture os ingredientes secos: a farinha de aveia, o fermento e a canela. Despeje os ingredientes secos sobre os h√∫midos e misture com uma esp√°tula, apenas at√© incorporar.", porque: "Separar os ingredientes secos e h√∫midos primeiro garante uma distribui√ß√£o uniforme do fermento e evita que se misture a massa em demasia.", pontoCritico: "Alguns grumos na massa s√£o perfeitamente normais. √â melhor ter grumos do que misturar em excesso." },
                    { title: "Assar os Muffins", description: "Divida a massa uniformemente pelas formas de muffin, enchendo cada uma at√© cerca de 3/4. Leve ao forno por 20 a 25 minutos, ou at√© um palito inserido no centro sair limpo. Deixe arrefecer na forma por alguns minutos antes de transferir para uma grelha.", porque: "O tempo de arrefecimento na forma permite que os muffins firmem um pouco, tornando mais f√°cil remov√™-los sem que se partam.", pontoCritico: "N√£o encha demasiado as formas, pois os muffins ir√£o crescer.", timer: 1200 }
                ],
                variacoes: [
                    "<strong>Com Nozes:</strong> Adicione um punhado de nozes picadas √† massa para uma textura crocante.",
                    "<strong>Com Frutos Vermelhos:</strong> Substitua a ma√ß√£ por mirtilos ou framboesas.",
                    "<strong>Cobertura de Streusel Fit:</strong> Misture aveia, um pouco de √≥leo de coco e canela e polvilhe por cima dos muffins antes de assar."
                ]
            },
            'iogurte-grelhado': {
                title: "Aula 08: Iogurte Grego com P√™ssegos Grelhados",
                description: "Uma sobremesa incrivelmente simples, r√°pida e elegante. Aprenda como o calor de uma frigideira pode transformar uma fruta, caramelizando os seus a√ß√∫cares naturais e criando um contraste delicioso com a acidez do iogurte.",
                calculator: { label: "N√∫mero de P√™ssegos:", unit: "iogurte-grelhado-input", base_value: 2, default_value: 2 },
                details: { tempoPreparo: "5 min", tempoCozimento: "6-8 min", tempoDescanso: "N/A", rendimento: "Serve 2 pessoas", dificuldade: "F√°cil", utensilios: ["Frigideira-grelha ou frigideira normal"] },
                dicaDeMestre: "Escolha p√™ssegos que estejam maduros, mas ainda firmes ao toque. Se estiverem demasiado maduros, ir√£o desmanchar-se com o calor. A firmeza √© a chave para conseguir belas marcas de grelha.",
                ingredients: [
                    { name: 'P√™ssegos maduros, mas firmes', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: 'Iogurte Grego Natural', base_qty: 1, unit: 'ch√°vena', scalable: true },
                    { name: 'Mel ou Xarope de √Åcer', base_qty: 2, unit: 'c. de sopa', scalable: true },
                    { name: 'Folhas de Hortel√£ Fresca', base_qty: 0, unit: 'A gosto', scalable: false }
                ],
                steps: [
                    { title: "Preparar e Grelhar a Fruta", description: "Corte os p√™ssegos ao meio e remova o caro√ßo. Pincele a parte cortada com um pouco de mel. Aque√ßa uma frigideira-grelha em lume m√©dio-alto. Grelhe os p√™ssegos com a parte cortada para baixo por 3 a 4 minutos, sem mexer.", porque: "O calor alto e o contacto direto com a frigideira caramelizam o a√ß√∫car natural do p√™ssego e o mel, criando uma superf√≠cie dourada e um sabor tostado delicioso. N√£o mexer √© o que cria as marcas de grelha.", pontoCritico: "N√£o sobrecarregue a frigideira para manter a temperatura alta." },
                    { title: "Cozinhar o Outro Lado", description: "Vire os p√™ssegos e cozinhe por mais 3 a 4 minutos do lado da pele, apenas para que amole√ßam por completo.", porque: "Este passo finaliza o cozimento, tornando a fruta tenra e suculenta.", pontoCritico: "Reduza o lume se o mel come√ßar a queimar." }
                ],
                variacoes: [
                    "<strong>Outras Frutas:</strong> Esta t√©cnica funciona bem com nectarinas, anan√°s em fatias ou figos.",
                    "<strong>Com Croc√¢ncia:</strong> Sirva com um pouco de granola ou pist√°cios picados por cima.",
                    "<strong>Toque Bals√¢mico:</strong> Regue com um fio de creme bals√¢mico no final para um contraste agridoce."
                ]
            },
            'brownie-feijao': {
                title: "Aula 09: Brownie de Feij√£o Preto",
                description: "Prepare-se para se surpreender. Esta receita usa feij√£o preto como base secreta para criar brownies incrivelmente densos, h√∫midos e ricos em prote√≠na e fibra, sem que ningu√©m adivinhe o ingrediente principal.",
                calculator: { label: "Latas de Feij√£o Preto (400g):", unit: "brownie-feijao-input", base_value: 1, default_value: 1 },
                details: { tempoPreparo: "10 min", tempoCozimento: "25-30 min", tempoDescanso: "30 min", rendimento: "9 brownies", dificuldade: "F√°cil", utensilios: ["Processador de alimentos", "Forma quadrada (20x20cm)"] },
                dicaDeMestre: "O segredo para ningu√©m descobrir o ingrediente secreto √© lavar e escorrer muito bem o feij√£o preto enlatado para remover todo o sabor salgado da conserva. Depois, processe-o at√© obter um pur√© o mais liso poss√≠vel.",
                ingredients: [
                    { name: 'Feij√£o Preto cozido, bem lavado e escorrido', base_qty: 1, unit: 'lata (400g)', scalable: true },
                    { name: 'Ovos', base_qty: 2, unit: 'unid.', scalable: true },
                    { name: 'Cacau em P√≥ (sem a√ß√∫car)', base_qty: 0.5, unit: 'ch√°vena', scalable: true },
                    { name: 'A√ß√∫car de Coco ou Mascavado', base_qty: 0.75, unit: 'ch√°vena', scalable: true },
                    { name: '√ìleo de Coco, derretido', base_qty: 3, unit: 'c. de sopa', scalable: true },
                    { name: 'Fermento em P√≥', base_qty: 0.5, unit: 'c. de ch√°', scalable: true },
                    { name: 'Pepitas de Chocolate Amargo', base_qty: 0.5, unit: 'ch√°vena', scalable: true }
                ],
                steps: [
                    { title: "Preparar a Massa", description: "Pr√©-aque√ßa o forno a 180¬∞C. Forre uma forma quadrada (20x20cm). Num processador de alimentos, junte todos os ingredientes exceto as pepitas de chocolate. Processe em alta velocidade por v√°rios minutos at√© obter uma massa completamente lisa e homog√©nea.", porque: "O feij√£o substitui a farinha e a maior parte da gordura. Process√°-lo muito bem √© essencial para que a sua textura se desfa√ßa e se integre na massa, criando uma base densa e 'fudgy'.", pontoCritico: "Raspe as laterais do processador v√°rias vezes para garantir que n√£o ficam peda√ßos de feij√£o por triturar." },
                    { title: "Adicionar o Chocolate e Assar", description: "Incorpore as pepitas de chocolate na massa. Despeje na forma preparada e alise a superf√≠cie. Leve ao forno por 25 a 30 minutos. O brownie est√° pronto quando um palito inserido no centro sai com algumas migalhas h√∫midas.", porque: "As pepitas de chocolate adicionam uma textura extra e mais sabor. O tempo de cozedura √© crucial para um interior h√∫mido.", pontoCritico: "N√£o cozinhe demais. √â prefer√≠vel um brownie ligeiramente mal cozido do que um seco.", timer: 1500 }
                ],
                variacoes: [
                    "<strong>Com Nozes:</strong> Adicione um punhado de nozes picadas √† massa.",
                    "<strong>Extra Caf√©:</strong> Junte uma colher de ch√° de caf√© expresso em p√≥ para intensificar o sabor do chocolate."
                ]
            },
            'torta-limao-fit': {
                title: "Aula 10: Torta de Lim√£o Fit",
                description: "Uma vers√£o leve, proteica e sem cozimento da cl√°ssica torta de lim√£o. Aprenda a fazer uma base crocante de frutos secos e um recheio cremoso e azedinho com iogurte grego.",
                calculator: { label: "Di√¢metro da Forma (cm):", unit: "torta-limao-fit-input", base_value: 20, default_value: 20 },
                details: { tempoPreparo: "20 min", tempoCozimento: "N/A", tempoDescanso: "4 horas", rendimento: "Serve 8 pessoas", dificuldade: "Intermedi√°rio", utensilios: ["Forma de tarte com fundo amov√≠vel", "Processador de alimentos"] },
                dicaDeMestre: "Para um creme mais firme, use gelatina incolor. Hidrate uma folha de gelatina em √°gua fria, esprema e dissolva-a numa colher de sopa de √°gua quente. Incorpore esta mistura ao creme de iogurte antes de o verter sobre a base.",
                ingredients: [
                    { name: 'Am√™ndoas ou Cajus', base_qty: 1.5, unit: 'ch√°venas', scalable: true, heading: 'Para a Base' },
                    { name: 'T√¢maras Medjool, sem caro√ßo', base_qty: 1, unit: 'ch√°vena', scalable: true },
                    { name: '√ìleo de Coco, derretido', base_qty: 2, unit: 'c. de sopa', scalable: true },
                    { name: 'Iogurte Grego Natural (alto teor de prote√≠na)', base_qty: 500, unit: 'g', scalable: true, heading: 'Para o Recheio' },
                    { name: 'Sumo e Raspas de Lim√£o', base_qty: 3, unit: 'unid.', scalable: true },
                    { name: 'Mel ou Xarope de √Åcer', base_qty: 4, unit: 'c. de sopa', scalable: true }
                ],
                steps: [
                    { title: "A Base Crocante", description: "No processador de alimentos, triture as am√™ndoas at√© obter uma farinha grossa. Adicione as t√¢maras e o √≥leo de coco e processe at√© a mistura se agregar e formar uma 'massa' pegajosa. Pressione esta mistura firmemente no fundo e nas laterais de uma forma de tarte.", porque: "Esta √© uma base cl√°ssica de sobremesas 'raw' (cruas). As t√¢maras atuam como ado√ßante e como 'cola' para unir os frutos secos.", pontoCritico: "Pressione a base de forma uniforme para que n√£o haja partes mais grossas que outras." },
                    { title: "O Recheio Cremoso e Proteico", description: "Numa tigela, misture bem o iogurte grego, o sumo e as raspas de lim√£o e o ado√ßante. Prove e ajuste a do√ßura e a acidez a gosto. Despeje o creme sobre a base na forma.", porque: "O iogurte grego cria um recheio naturalmente espesso, cremoso e rico em prote√≠na. As raspas de lim√£o cont√™m os √≥leos essenciais da fruta, conferindo um aroma muito mais intenso que apenas o sumo.", pontoCritico: "Use iogurte grego gordo e n√£o ado√ßado para a melhor textura e controlo sobre a do√ßura." },
                    { title: "Refrigerar para Firmar", description: "Leve a torta √† geleira por pelo menos 4 horas, ou at√© o recheio estar completamente firme. Sirva fria, decorada com mais raspas de lim√£o.", porque: "O frio firma o √≥leo de coco na base e o iogurte no recheio, dando √† torta a sua estrutura final.", pontoCritico: "Este passo n√£o pode ser apressado. A torta precisa de tempo para assentar.", timer: 14400 }
                ],
                variacoes: [
                    "<strong>Torta de Lima:</strong> Substitua o lim√£o por lima para a vers√£o 'key lime pie'.",
                    "<strong>Com Coco:</strong> Adicione coco ralado √† base e um pouco de leite de coco ao recheio.",
                    "<strong>Base de Aveia:</strong> Substitua metade dos frutos secos por flocos de aveia."
                ]
            },
            'bolo-laranja-fit': { title: "Aula 11: Bolo de Laranja com Farinha de Am√™ndoa" },
            'danoninho-inhame': { title: "Aula 12: 'Danoninho' Caseiro de Morango e Inhame" },
            'cheesecake-copo': { title: "Aula 13: Cheesecake Fit no Copo" },
            'barra-proteina': { title: "Aula 14: Barra de Prote√≠na Caseira" },
            'trufas-fit': { title: "Aula 15: Trufas de Batata Doce e Cacau" }
        };

        // ===================================================================================
        // FUN√á√ïES GLOBAIS (N√ÉO MEXER)
        // ===================================================================================

        const aulasList = document.getElementById('aulas-list');
        const pageTitle = document.getElementById('page-title');
        const receitasContainer = document.getElementById('receitas-container');
        const backToListBtn = document.getElementById('back-to-list-btn');

        const formatNumber = (num) => {
            if (num < 1 && num > 0) return num.toFixed(2);
            if (num % 1 !== 0) return num.toFixed(1);
            return num;
        };
        
        const updateIngredients = (recipeData, inputValue) => {
            const list = document.getElementById(`ingredient-list-${recipeData.calculator.unit}`);
            if (!list || !recipeData.ingredients) return;

            const multiplier = inputValue / recipeData.calculator.base_value;
            let html = '';
            let currentHeading = '';

            recipeData.ingredients.forEach(ing => {
                if(ing.heading && ing.heading !== currentHeading) {
                    currentHeading = ing.heading;
                    html += `<h5 class="font-bold text-stone-700 mt-3 mb-1">${currentHeading}:</h5>`;
                }

                let qtyDisplay = '';
                if (!ing.scalable) {
                    qtyDisplay = ing.unit;
                } else {
                    const scaledQty = ing.base_qty * multiplier;
                    qtyDisplay = `${formatNumber(scaledQty)} ${ing.unit}`;
                }
                
                html += `
                    <li class="ingredient-item">
                        <label class="flex items-center p-1 rounded-md hover:bg-stone-100">
                            <input type="checkbox" class="mr-2 h-4 w-4 text-amber-600 focus:ring-amber-500 border-stone-300 rounded">
                            <span class="flex-1 flex justify-between">
                                <span>${ing.name}</span>
                                <span class="font-semibold text-right pl-2">${qtyDisplay}</span>
                            </span>
                        </label>
                    </li>`;
            });
            list.innerHTML = html;
        };

        const generateRecipeHTML = (recipeData) => {
             if (!recipeData.details) {
                return `<div class="text-center p-10"><h2 class="text-3xl font-bold text-amber-700">${recipeData.title}</h2><p class="mt-4 text-stone-600">O conte√∫do detalhado para esta aula estar√° dispon√≠vel em breve. Obrigado pela sua paci√™ncia!</p></div>`;
            }
             return `
                <div class="text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-amber-700">${recipeData.title}</h2>
                    <p class="mt-4 max-w-3xl mx-auto text-stone-600 text-lg">${recipeData.description}</p>
                </div>
                
                <div class="mt-10 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-stone-100 p-4 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-2xl">‚è≥</span>
                        <h4 class="font-bold text-stone-800">Preparo</h4>
                        <p class="text-stone-600 text-sm">${recipeData.details.tempoPreparo}</p>
                    </div>
                    <div class="bg-stone-100 p-4 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-2xl">üç≥</span>
                        <h4 class="font-bold text-stone-800">Cozimento</h4>
                        <p class="text-stone-600 text-sm">${recipeData.details.tempoCozimento}</p>
                    </div>
                    <div class="bg-stone-100 p-4 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-2xl">üçΩÔ∏è</span>
                        <h4 class="font-bold text-stone-800">Rendimento</h4>
                        <p class="text-stone-600 text-sm">${recipeData.details.rendimento}</p>
                    </div>
                    <div class="bg-stone-100 p-4 rounded-lg flex flex-col justify-center items-center">
                        <span class="text-2xl">‚≠ê</span>
                        <h4 class="font-bold text-stone-800">Dificuldade</h4>
                        <p class="text-stone-600 text-sm">${recipeData.details.dificuldade}</p>
                    </div>
                </div>

                <div class="mt-12 grid grid-cols-1 lg:grid-cols-3 gap-x-12 gap-y-8">
                    <div class="lg:col-span-1">
                        <h3 class="text-2xl font-bold text-stone-800 mb-4 border-b-2 border-amber-500 pb-2">Planeamento</h3>
                        <div class="bg-stone-50 p-4 rounded-lg">
                            <label for="${recipeData.calculator.unit}" class="block text-lg text-stone-700 mb-2 font-bold">${recipeData.calculator.label}</label>
                            <input type="number" id="${recipeData.calculator.unit}" value="${recipeData.calculator.default_value}" min="0.5" step="1" class="w-full p-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-amber-500">
                        </div>
                        <div class="mt-6">
                            <h4 class="font-bold text-lg mb-2 text-stone-700">Checklist de Ingredientes:</h4>
                            <ul class="space-y-1 text-stone-600 text-sm" id="ingredient-list-${recipeData.calculator.unit}"></ul>
                        </div>
                         <div class="mt-6">
                            <h4 class="font-bold text-lg mb-2 text-stone-700">Utens√≠lios Chave:</h4>
                            <ul class="space-y-2 text-stone-600 list-disc list-inside text-sm">
                                ${recipeData.details.utensilios.map(utensil => `<li>${utensil}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div class="lg:col-span-2">
                        <h3 class="text-2xl font-bold text-stone-800 mb-4 border-b-2 border-amber-500 pb-2">Tutorial Detalhado</h3>
                        <div class="space-y-6">
                            ${recipeData.steps.map((step, index) => {
                                if (step.isSubRecipe) {
                                    return `
                                    <div class="p-4 rounded-lg bg-amber-50 border-l-4 border-amber-400">
                                        <h4 class="font-bold text-xl text-amber-800 mb-4">${step.title}</h4>
                                        <div class="space-y-4">
                                        ${step.subSteps.map(subStep => `
                                            <div class="ml-4">
                                                <h5 class="font-semibold text-lg text-stone-800 mb-1">${subStep.title}</h5>
                                                <div class="prose prose-stone max-w-none text-sm">
                                                    <p>${subStep.description}</p>
                                                     <details class="mt-3 text-xs">
                                                        <summary class="font-bold text-blue-800">Ver o porqu√™</summary>
                                                        <div class="mt-2 bg-blue-50 text-blue-800 rounded-md p-3">${subStep.porque}</div>
                                                     </details>
                                                     <details class="mt-2 text-xs">
                                                        <summary class="font-bold text-red-800">Ver ponto cr√≠tico</summary>
                                                        <div class="mt-2 bg-red-50 text-red-800 rounded-md p-3">${subStep.pontoCritico}</div>
                                                     </details>
                                                </div>
                                            </div>
                                        `).join('')}
                                        </div>
                                    </div>`;
                                }
                                return `
                                <div class="p-4 rounded-lg bg-stone-50 border-l-4 border-stone-200">
                                    <h4 class="font-bold text-xl text-stone-800 mb-2"><span class="bg-amber-600 text-white rounded-full w-8 h-8 inline-flex items-center justify-center mr-3 text-base">${index + 1}</span> ${step.title}</h4>
                                    <div class="prose prose-stone max-w-none pl-11 text-sm">
                                        <p>${step.description}</p>
                                        <details class="mt-3 text-xs">
                                            <summary class="font-bold text-blue-800">Ver o porqu√™</summary>
                                            <div class="mt-2 bg-blue-50 text-blue-800 rounded-md p-3">${step.porque}</div>
                                        </details>
                                        <details class="mt-2 text-xs">
                                            <summary class="font-bold text-red-800">Ver ponto cr√≠tico</summary>
                                            <div class="mt-2 bg-red-50 text-red-800 rounded-md p-3">${step.pontoCritico}</div>
                                        </details>
                                    </div>
                                    ${step.timer ? `<div class="mt-4 pl-11 flex items-center gap-4"><button class="timer-btn bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition text-sm" data-time="${step.timer}">Iniciar Timer (${Math.floor(step.timer/60)}m ${step.timer%60}s)</button><span class="timer-display text-lg font-mono font-bold text-amber-700"></span></div>` : ''}
                                </div>`;
                            }).join('')}
                        </div>
                        
                        <div class="mt-8">
                            <h3 class="text-2xl font-bold text-stone-800 mb-4 border-b-2 border-amber-500 pb-2">Varia√ß√µes e Dicas</h3>
                            <div class="prose prose-stone max-w-none bg-amber-50 p-4 rounded-lg border-l-4 border-amber-400 text-sm">
                                ${recipeData.variacoes.map(item => `<p>${item}</p>`).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };
        
        document.querySelectorAll('.aula-card').forEach(card => {
            const recipeId = card.dataset.target.replace('receita-', '');
            const recipeData = aulas[recipeId];

            if (recipeData) {
                const targetElement = document.getElementById(card.dataset.target);
                targetElement.innerHTML = generateRecipeHTML(recipeData);
                
                if (recipeData.calculator) {
                    const input = document.getElementById(recipeData.calculator.unit);
                    if (input) {
                        input.addEventListener('input', (e) => {
                            updateIngredients(recipeData, e.target.value);
                        });
                        // Initial population
                        updateIngredients(recipeData, input.value);
                    }
                }
            }

            card.addEventListener('click', () => {
                const targetId = card.dataset.target;
                const targetRecipe = document.getElementById(targetId);
                
                aulasList.classList.add('hidden');
                pageTitle.classList.add('hidden');
                receitasContainer.classList.remove('hidden');
                targetRecipe.classList.remove('hidden');
                window.scrollTo(0, 0);
            });
        });

        backToListBtn.addEventListener('click', () => {
            aulasList.classList.remove('hidden');
            pageTitle.classList.remove('hidden');
            receitasContainer.classList.add('hidden');
            document.querySelectorAll('.receita-content').forEach(recipe => {
                recipe.classList.add('hidden');
            });
            window.scrollTo(0, 0);
        });
        
        receitasContainer.addEventListener('click', (event) => {
            if (event.target.classList.contains('timer-btn')) {
                const button = event.target;
                if (button.classList.contains('active')) return;

                let timeInSeconds = parseInt(button.dataset.time, 10);
                const display = button.nextElementSibling;
                
                button.classList.add('active');
                button.disabled = true;
                
                const interval = setInterval(() => {
                    const minutes = Math.floor(timeInSeconds / 60);
                    const seconds = timeInSeconds % 60;
                    if(display) { display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`; }
                    
                    if (timeInSeconds <= 0) {
                        clearInterval(interval);
                        if(display) display.textContent = "Tempo esgotado!";
                        button.classList.remove('active');
                        button.disabled = false;
                    } else { timeInSeconds--; }
                }, 1000);
            }
        });
    });
    </script>
</body>
</html>
